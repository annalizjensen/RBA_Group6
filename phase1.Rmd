---
title: "Final Project Phase I"
output: html_document
author: "Anna Liz Jensen, Maridol Guillen, Brooke Haley-Herevia, Keyur Joshi"
date: "January 29, 2022"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(include = TRUE, message = FALSE, warning = FALSE)
library(data.table)
library(readr)
```

### *Step 1*

We met as a group on a few occasions to settle on the data set we will describe in more detail in the next part of the document.

### *Step 2*

#### An intro to the data set

There are two data sets with Google Play Store data. Both were scraped from the Google Play website by Kaggle user [lava18](https://www.kaggle.com/lava18). 

The "googleplaystore.csv" file lists app information including user-submitted app ratings, app downloads, app version, and more. 

The "googleplaystore_user_reviews.csv" file lists data including sentiment, sentiment polarity and sentiment subjectivity score. The three latter variables for sentiment are intended to gauge the human perspective or intent behind the review.

While the exact machine learning procedure used by the data set is not noted in the Kaggle description, we suspect either a naive Bayes or bag of words or similar classifier was used to generate the polarity and subjectivity natural language processing (NLP) scores.

In NLP, polarity refers to the intensity of human emotion, classified between -1 and 0 for negative emotions and between 0 and 1 for positive emotions, with scores around 0 indicating emotional neutrality. Subjectivity in NLP is score between 0 and 1 and measures whether the statement is suspected to be objective facts (closer to 0) or an expression of opinions with little rational support (closer to 1).

Variables in "googleplaystore.csv" are: 

-   Name of App

-   Category of App

-   Average Rating

-   Number of Reviews

-   Size of App Software Download

-   Number of App Installs

-   Type (Free or Paid)

-   Price (If not Free)

-   Developer Content Rating

-   Genre(s) of App

-   Date App Last Updated

-   Current Version of App

-   Minimum Android OS Version Required

Variables in "googleplaystore_user_reviews.csv": 

-   Name of App

-   Translated Review

-   Sentiment Overall (Negative, Neutral, or Positive)

-   Sentiment_Polarity

-   Sentiment_Subjectivity

#### Data source

[Kaggle -- Google Play Store App Reviews and Rating Web Scrape](https://www.kaggle.com/lava18/google-play-store-apps)

#### Justification

In this final project, we seek to apply the techniques and skills we have acquired in class to a real-world data set. After tidying the data, we intend to run analyses to determine insights that could guide future app development success. How does app size impact overall rating? What is user sentiment toward apps that update more frequently with new features (e.g. higher app versions) versus apps that mostly stay static? How does review sentiment change the longer an app has gone without updates? These are a few of the many questions we believe we can address while working with this data set. 

This data set needs intensive cleaning, which will test our classroom skills with R. In Phase 1, Part 2, we list out just how many fields are explicitly missing within the data set, largely concentrated within the sentiment analysis of user reviews. Additionally, we find that many columns have data that could be coerced to a mode of data more easily analyzed -- for example, we can convert app version, number of downloads, and app size into numeric values in order to better compare them. 

We also noticed when reviewing comments on the data set, that some users observe [erroneous data shifting](https://www.kaggle.com/lava18/google-play-store-apps/discussion/66015) at times within the CSV. We will seek to replicate that and other possible issues by reviewing other complaints and working through the cleaning phase of the data in the ensuing project.

### *Step 3*

#### Import

```{r}
user_reviews_filename = "googleplaystore_user_reviews.csv"
play_store_ratings = "googleplaystore.csv"
user_reviews_df = fread(user_reviews_filename)
user_ratings_df = fread(play_store_ratings, fill=T)
```

#### Listing Out Variables

```{r}
list_var <- function(df,data_set_name){
  col_list <- paste(names(df),collapse=" | ")
  cat(paste("User ", data_set_name, " Features:",col_list,sep = "\n"))
}

list_var(user_ratings_df,"Ratings")
list_var(user_reviews_df,"Reviews")


col_list <- paste(names(user_reviews_df),collapse=" | ")
cat(paste("User Reviews Features:",col_list,sep = "\n"))
```

#### Structure

```{r}
str(user_ratings_df)
str(user_reviews_df)
```

#### Dimensions

```{r}
dim_ratings <- dim(user_ratings_df)
paste("User Ratings has ", dim_ratings[1] ," rows and " , dim_ratings[2] , " columns")
dim_reviews <- dim(user_reviews_df)
paste("User Ratings has " , dim_reviews[1] , " rows and " , dim_reviews[2] , " columns")
```

#### Head and Tail

```{r}
head(user_ratings_df)
head(user_reviews_df)

tail(user_ratings_df)
tail(user_reviews_df)
```

#### Missing Values

```{r}
how_many_na = function(df) {
  length(which(is.na(df)))
}

paste("Missing values in ratings data ",how_many_na(user_ratings_df))
paste("Missing values in reviews data ",how_many_na(user_reviews_df))
```

#### Missing Values Per Column

```{r}

sum_of_na = function(df) {
  sapply(df, function(col) sum(is.na(col)))
}

sum_of_na(user_ratings_df)

sum_of_na(user_reviews_df)
```

#### Summary of Cleaning Expectations

We expect to clean the follow aspects of the data

-   Remove NaN rows from consideration

-   Join the datasets together on the app name most likely

-   Parse and convert many character values to numeric (Android ver, size, installs etc)

    -   should also convert last updated to a datetime

    -   Type variable is a boolean -- we should change it to `isFree` and use logical values

    -   Sentiment score can become a numeric value or we can ditch it in favor of the floating point score
